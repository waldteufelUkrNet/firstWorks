var selectedCountry,isCountriesListOpen=!1,blockedCountriesArr=["AU","IR","IL","CA","UA","US","JP","SY","KP"];function addCountryCode(e){var i=e,r=$(i).attr("data-phoneCode");$("#input-country-code").val(r);var n=$(i).attr("data-imgName"),t="assets/img/"+n;$(i).parent().siblings(".regform__flag-wrapper").find(".regform__flag-img").attr("src",t),$("#input-phone").removeAttr("readonly").focus(),selectedCountry=n.slice(0,-4)}function isEmailValid(e){return 1==calculateCharsInStr(e,"@")&&(!(calculateCharsInStr(e,".")<1)&&("@"!=e.charAt(0)&&"."!=e.charAt(0)&&"@"!=e.charAt(e.length-1)&&"."!=e.charAt(e.length-1)&&(-1==e.indexOf("@.")&&-1!=e.split("@")[1].indexOf("."))))}function calculateCharsInStr(e,i){for(var r=count=0;;){var n=e.indexOf(i,r);if(-1==n)break;count++,r=n+1}return count}function isNumeric(e){return!isNaN(parseFloat(e))&&isFinite(e)}$(".regform__flag-wrapper-cover-for-click").click(function(){if(isCountriesListOpen)$(".regform__countries-wrapper").css({height:"0px"}).css({display:"none"}),isCountriesListOpen=!1;else{if($(".regform__countries-wrapper").css({display:"block"}).css({height:"190px"}),isCountriesListOpen=!0,$(".regform__country").children().length)return;e:for(var e=0;e<countriesArr.length;e++){for(var i=0;i<blockedCountriesArr.length;i++)if(blockedCountriesArr[i]==countriesArr[e].ISOcode)continue e;var r='<div class="regform__country" data-phoneCode="'+countriesArr[e].phoneCode+'" data-imgName="'+countriesArr[e].imgName+'" onclick="addCountryCode(this)">                       <div class="regform__img-flag-wrapper">                         <img class="regform__flag-img" src="assets/img/'+countriesArr[e].imgName+'", alt="country-flag">                       </div>                       <div class="regform__country-name">'+countriesArr[e].nameEn+"</div>                     </div>";$(".regform__countries-wrapper").append(r)}}}),$(document).click(function(e){isCountriesListOpen&&"regform__flag-wrapper-cover-for-click"!=e.target.className&&($(".regform__countries-wrapper").css({height:"0px"}).css({display:"none"}),isCountriesListOpen=!1)}),$("#input-phone").keypress(function(e){if(!((e=e||event).ctrlKey||e.altKey||e.metaKey)){var i,r=null!=(i=e).which?0==i.which||0==i.charCode?null:i.which<32?null:String.fromCharCode(i.which):i.keyCode<32?null:String.fromCharCode(i.keyCode);if(null!=r&&(r<"0"||"9"<r))return!1}}),$("#btnsubmit").click(function(){if($("#input-id").val().length<2){var e=$(".regform__info.regform__info_error:eq(0)");if("0px"!=$(e).css("height"))return;$("#input-id").css({"box-shadow":"0 0 5px red","border-color":"red"}).focus(),$(e).css({height:"auto","min-height":"30px",padding:"3px 0"});var i=$(e).css("height");return $(e).css({height:"0px","min-height":"0px",padding:"0px"}),void $(e).css({transition:"height .5s, padding-top .5s, margin .5s",height:i,padding:"3px",margin:"3px 0"})}if($("#input-phone").val().length<7){e=$(".regform__info.regform__info_error:eq(1)");if("0px"!=$(e).css("height"))return;$("#input-phone").css({"box-shadow":"0 0 5px red","border-color":"red"}).focus(),$(e).css({height:"auto","min-height":"30px",padding:"3px 0"});i=$(e).css("height");return $(e).css({height:"0px","min-height":"0px",padding:"0px"}),void $(e).css({transition:"height .5s, padding-top .5s, margin .5s",height:i,padding:"3px",margin:"3px 0"})}if(!isEmailValid($("#input-email").val())){e=$(".regform__info.regform__info_error:eq(2)");if("0px"!=$(e).css("height"))return;$("#input-email").css({"box-shadow":"0 0 5px red","border-color":"red"}).focus(),$(e).css({height:"auto","min-height":"30px",padding:"3px 0"});i=$(e).css("height");return $(e).css({height:"0px","min-height":"0px",padding:"0px"}),void $(e).css({transition:"height .5s, padding-top .5s, margin .5s",height:i,padding:"3px",margin:"3px 0"})}if($("#message").val().length<10){e=$(".regform__info.regform__info_error:eq(3)");if("0px"!=$(e).css("height"))return;$("#message").css({"box-shadow":"0 0 5px red","border-color":"red"}).focus(),$(e).css({height:"auto","min-height":"30px",padding:"3px 0"});i=$(e).css("height");return $(e).css({height:"0px","min-height":"0px",padding:"0px"}),void $(e).css({transition:"height .5s, padding-top .5s, margin .5s",height:i,padding:"3px",margin:"3px 0"})}if(0!=confirmAntiBotFilterQuestion()){var r=$("#input-country-code").val()+$("#input-phone").val(),n={email:$("#input-email").val(),name:$("#input-id").val(),phone:r,body:$("#message").val()};$.ajax({type:"GET",data:n,url:"https://platform.etokenstrade.com/api/SendMailToSupport",crossDomain:!0,success:function(e){"1"==e?($("#input-id").val(""),$("#input-phone").val(""),$("#input-email").val(""),$("#message").val(""),$("#input-country-code").val("+000"),$(".regform__flag-img").attr("src","assets/img/european_union.png"),alert("your message has been sent")):($("#input-id").val(""),$("#input-phone").val(""),$("#input-email").val(""),$("#message").val(""),$("#input-country-code").val("+000"),$(".regform__flag-img").attr("src","assets/img/european_union.png"),alert("You entered incorrect data. Please send us a letter."))}})}}),$("#input-id").keyup(function(e){1<$("#input-id").val().length&&($(".regform__info.regform__info_error:eq(0)").css({transition:"height .5s, padding-top .5s, margin .5s",height:"0",padding:"0",margin:"0"}),$("#input-id").css({"box-shadow":"none","border-color":"lightgrey"}))}),$("#input-phone").keyup(function(e){6<$("#input-phone").val().length&&($(".regform__info.regform__info_error:eq(1)").css({transition:"height .5s, padding-top .5s, margin .5s",height:"0",padding:"0",margin:"0"}),$("#input-phone").css({"box-shadow":"none","border-color":"lightgrey"}))}),$("#input-email").keyup(function(){isEmailValid($("#input-email").val())&&($(".regform__info.regform__info_error:eq(2)").css({transition:"height .5s, padding-top .5s, margin .5s",height:"0",padding:"0",margin:"0"}),$("#input-email").css({"box-shadow":"none","border-color":"lightgrey"}))}),$("#message").keyup(function(){9<$("#message").val().length&&($(".regform__info.regform__info_error:eq(3)").css({transition:"height .5s, padding-top .5s, margin .5s",height:"0",padding:"0",margin:"0"}),$("#message").css({"box-shadow":"none","border-color":"lightgrey"}))});